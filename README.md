# Gulp-orange-juice

## Возможности

- Использование CSS-препроцессора с синтаксисом SCSS
- Использование Webpack для сборки JavaScript-модулей
- Сборка иконок в svg-спрайт
- Использование полифила Babel для поддержки старых браузеров при использовании современного синтаксиса ES6 в JavaScript
- Конвертация изображений в современный веб-формат .webp
- Стартовый шаблон для быстрого начала вёрстки

## Установка

Для работы сборки вам понадобится скачать и установить [node.js](https://nodejs.org).

Также установите систему контроля версии [Git](https://git-scm.com/downloads). Для работы сборки Git не обязателен, но для удобства установки и дальнейшей разработки лучше всё же установить.

В сборку встроен [плагин](https://www.npmjs.com/package/vinyl-ftp), который отвечает за автоматический деплой на хостинг, его конфигурацию можно изменить в файле `ftp.js` (`./gulp/config/ftp.js`). Туда необходимо указать все данные от ftp-аккаунта и, самое важное, для избежания утечки данных необходимо добавить этот файл в `.gitignore` после заполнения.

> Все команды пишутся от корня проекта!

После того, как все исходники будут скачаны из удаленного репозитория, введите в терминале команду `git init`, если вы хотите использовать пакет [husky](https://www.npmjs.com/package/husky) для линтинга файлов перед коммитами, а затем введите `npm install` для установки необходимых зависимостей для сборки. Если вам не нужен пакет husky, то сразу вводите команду `npm install`.

Во избежании всевозможных ошибок вам необходимо установить gulp глобально, но это в том случае если вы этого ещё не делали в других проектах.

`npm i gulp -g`

Эта процедура делается один раз и в следующий раз, когда будете разворачивать новый проект повторять эту команду не потребуется.

## Структура папок и файлов

```
├── .husky/                       # Инструмент, который обрабатывает хуки Git
├── .vscode/                      # Папка с настройками редактора
│   ├── extensions.json           # Файл с рекомендуемыми плагинами
│   ├── keybindings.json          # Файл с настройками горячих клавиш
│   ├── settings.json             # Файл с настройками VS Code и плагинов
├── src/                          # Исходники
│   ├── components                # Папка для хранения готовых решений
│   ├── html                      # Страницы сайта
│   │   └── chunk                 # Папка для хранения html-частей страницы
│   │   ├── index.hmtl            # Главный html-файл
│   ├── js                        # Скрипты
│   │   └── functions             # Папка для функций на js
│   │   ├── libs                  # Папка для загрузки локальных версий библиотек
│   │   ├── _functions.js         # Файл с подключением функций на js
│   │   ├── _libs.js              # Файл с подключением библиотек на js
│   │   ├── scripts.js            # Главный скрипт
│   ├── resources                 # Папка для хранения иных ассетов - php, видео-файлы, favicon и т.д.
│   │   ├── files                 # Файлы, которые должны храниться в корне сайта
│   │   │   ├── favicon           # Папка с фавиконками
│   │   ├── fonts                 # Папка для хранения шрифтов
│   │   ├── icons                 # Папка для хранения иконок
│   │   │   ├── svg               # Специальная папка для преобразования svg в спрайт
│   │   ├── img                   # Папка для хранения картинок
│   ├── sсss                      # Стили сайта
│   │   └── chunk                 # Папка с фрагментами sсss-файлов
│   │   ├── libs                  # Папка для хранения локальных css-стилей библиотек
│   │   ├── mixins                # Папка для сохранения миксинов
│   │   ├── _fonts.sсss           # Файл для подключения шрифтов
│   │   ├── _interface.sсss       # Файл для часто используемых стилей
│   │   ├── _mixins.sсss          # Файл для подключения миксинов из папки mixins
│   │   ├── _settings.sсss        # Файл для написания глобальных стилей
│   │   ├── _vars.sсss            # Файл для написания sсss-переменных
│   │   ├── styles.sсss           # Главный файл стилей
├── build/                        # Готовая версия сайта
├── gulp/                         # Папка для хранения кусков задач и конфигов для gulp
│   ├── config                    # Конфиги для gulp
│   ├── tasks                     # Задачи для gulp
└── .babelrc                      # Файл с настройками babel
└── .editorconfig                 # Файл с настройками форматирования кода
└── .gitignore                    # Файл, который предотвращает передачу определённых файлов в репозиторий
└── .htmlhintrc                   # Файл с настройками HTMLHint
└── .prettierrc                   # Файл с настройками Prettier
└── .stylelintrc                  # Файл с настройками Stylelint
└── gulpfile.babel.js             # Файл с настройками Gulp
└── package-lock.json             # Временный файл пакетного менеджера npm
└── package.json                  # Файл с настройками сборки и установленными пакетами
└── README.md                     # Документация сборки
└── webpack.config.js             # Файл с настройками вебпака
```

## Разворачиваем сервер

Автоматическое открытие вкладки отключено по умолчанию, после запуска сервера необходимо перейти по ссылке из терминала - http://localhost:5000.
Если хотите включить автоматическое открытие влкадки, то необходимо в файле `server.js` (`./gulp/tasks/server.js`) изменить свойство `open` на `true`

## Команды

- `npm run dev` - запуск сервера разработки
- `npm run build` - полная сборка с максимальной оптимизацией без запуска сервера разработки
- `npm run zip` - создание архива с версией build и оптимизацией
- `npm run ftp` - копированием файлов из папки build на хостинг
- `npm run git` - копированием файлов из папки build в ветку gh-pages и автоматичское создание ссылки на GitHub Pages в подключённом репозитории
- `npm run prettier` - исправление ошибок в файлах javascript
- `npm run validate` - валидация готового html-документа
- `npm run stylelint` - поиск ошибок в scss-файлах
- `npm run stylelint:fix` - исправление ошибок в scss-файлах
